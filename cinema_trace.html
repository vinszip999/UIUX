<html>

<head>
    <title>웹마을 시네마</title>
    <meta charset="utf-8">
    <script>
        window.onload = function () {

            document.write("1" + "<br>");
            
            var banzaiMovie =
                new Movie("카우보이 밴자이", "고전 컬트", 5, ["2:00pm", "6:00pm", "8:00pm",
                    "12:00pm"]);
            alert(banzaiMovie.getNextShowing());

            document.write("2" + "<br>");

            var plan9Movie =
                new Movie("외계로부터의 9호 계획", "고전 컬트", 2, ["4:00pm", "6:00pm", "10:00pm"]);
            alert(plan9Movie.getNextShowing());
            
            document.write("3" + "<br>");

            var forbiddenPlanetMovie =
                new Movie("금지된 세계", "고전 SF", 5, ["3:00pm", "8:00pm"]);
            alert(forbiddenPlanetMovie.getNextShowing());
            
            document.write("4" + "<br>");

            var mirimMovie =
                new Movie("위대한 쇼맨", "뮤지컬", 3, ["1:00pm", "3:00pm", "10:00pm", "12:00pm"]);
            alert(mirimMovie.getNextShowing());
            
            document.write("5" + "<br>"); document.write("3312_이유빈" + "<br>");
        }
        function Movie(title, genre, rating, showtimes) {

            document.write("6" + "<br>");

            this.title = title; 
            this.genre = genre;
            this.rating = rating; 
            this.showtimes = showtimes;
            this.getNextShowing = function () {
                var now = new Date().getTime();
                for (var i = 0; i < this.showtimes.length; i++) {
                    
                    document.write("7" + "<br>");

                    var showtime = getTimeFromString(this.showtimes[i]);
                    if ((showtime - now) > 0) {
                        return this.title + "의 다음 상영시간은 "
                            + this.showtimes[i] + "입니다";
                    }
                }
                return null;
            };
        }
        function getTimeFromString(str) {

            document.write("8" + "<br>");

            var theTime = new Date();
            var time = str.match(/(\d+)(?::(\d\d))?\s*(p?)/);
            theTime.setHours(parseInt(time[1]) + (time[3] ? 12 : 0));
            theTime.setMinutes(parseInt(time[2]) || 0);
            return theTime.getTime();
        }
    </script>
</head>

<body></body>

</html>